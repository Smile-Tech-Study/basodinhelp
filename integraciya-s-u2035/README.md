# Интеграция с У2035

Настроенная интеграция с У2035 по проекту БАС на платформе Odin:

\- Позволяет отправить ЦС методиста в формате xAPI в LRS У2035

\- Позволяет отправить ЦС гражданина в формате xAPI в LRS У2035

\- Позволяет передавать файлы в хранилище s3 (видеоматериалы, решения заданий студентов и т.д.)

:::info

Без настроенной интеграции цифровой след не будет отправлен и, соответственно, принят У2035.

:::

Как проверить настройку интеграции:

\- Зайти на страницу организации в Odin

\- В правом боковом меню нажать на кнопку “Интеграции с У2035”

Просмотреть статус интеграции и настроить может любой пользователь организации с ролью “Администратор организации”.

## Инструкция по интеграции с хранилищами У2035 (БАС)

Интеграция осуществляется для каждой организации. Для настройки интеграции:

1. На странице редактирования организации есть чекбокс “Участник проекта Кадры для БАС” для тарифов “Индивидуальный” и “Профессиональный”.
2. В разделе “Интеграция с У2035” есть карточка интеграции по проекту.

![](<../.gitbook/assets/image (31).png>)

3. По нажатию на карточку проекта пользователь переходит к настройке интеграции:

![](<../.gitbook/assets/image (32).png>)

Настройка интеграции состоит из 4 этапов, на каждом из них надо совершить какое-либо действие.

#### Этап 1

* Здесь показывается кнопка “Скопировать шаблон”, этот шаблон генерируется и по нажатию на кнопку у пользователя он скопируется в буфер обмена.
* А также показывается кнопка “Данные у меня” по нажатию на которую пользователь перейдет к этапу 2.

#### Этап 2

![](<../.gitbook/assets/image (33).png>)

* При переходе на этот этап изменяется статус первого этапа на “выполнено”, а второго на “в процессе”
* Здесь же отображается поле для ввода Basic и кнопка подключения
* После того как пользователь введет Basic и нажмет подключение, отправятся GET и POST запросы к тестовому хранилищу У2035 в соответствии с их документацией
* Пока ожидается ответ от У2035, показывается спиннер:

![](<../.gitbook/assets/image (34).png>)

Если все хорошо, то показывается успешный статус подключения на этом этапе и разблокируется кнопка “Проверено”:

![](<../.gitbook/assets/image (35).png>)

Если что-то пошло не так, отражается ошибка:

![](<../.gitbook/assets/image (36).png>)

В случае успеха из ответа на POST-запрос забирается guid, он потребуется на следующем этапе.

#### Этап 3

На данном этапе пользователь информируется следующим сообщением:

"После отправки письма Университету 2035 в течение 3 рабочих дней вам придут два письма:

* Письмо с данными для получения доступа к продуктовому контуру (Basic, Key, Secret)
*   Письмо с данными для доступа к хранилищу S3 (User Id, Password, Access Key ID, Secret Key)

    После их получения нажмите кнопку "Данные у меня" и переходите к следующему пункту"

На этом шаге требуется получить доступ уже к промышленному контуру.

* Показывается кнопка “Скопировать шаблон”, этот шаблон генерируется и по нажатию на кнопку у пользователя он скопируется в буфер обмена.
* По нажатию на кнопку “Данные у меня” пользователь попадает на этап 4.

#### Этап 4

На этом этапе пользователю высвечивается следующая информация:

"Введите параметр Basic из первого письма, а также User Id, Access Key ID и Secret Key из второго. После этого нажмите кнопку Интеграция. Мы проверим правильность соединения и сообщим вам о результате в течение минуты. При успешной интеграции ваш проект будет подключен к хранилищу Университета 2035, и мы сможем передавать цифровой след в автоматическом режиме. Нажмите активную кнопку "Все отлично" для завершения настройки".

Этап, который похож на этап 2. Только здесь отправляется GET и POST запросы в промышленный контур У2035.

Также на этом этапе пользователь получает в письме от У2035 URL хранилища S3, который он должен ввести в соответствующем поле.

Если по нажатию на кнопку “Интеграция” проверка прошла успешно, то становится активной кнопка “Все отлично”. Если нет, показывается ошибка как на этапе 2.

Отображаются следующие поля:

* Введите User ID
* Введите Access Key ID хранилища S3
* Введите Secret Key хранилища S3

4. По нажатию на кнопку “Все отлично” на этапе 4 интеграция считается завершенной и статус меняется на странице интеграций с У2035:

![](<../.gitbook/assets/image (40).png>)

* Показывается восклицательный знак у шестеренки и подсказка
* После завершения настройки интеграции (при статусе “Активен”) не будет возможности провалиться в карточку интеграции и поменять какие-либо настройки

5. В шестеренке добавлена опция “Отключить”:

![](<../.gitbook/assets/image (41).png>)

По нажатию на “Отключить” показывается предупреждающее модальное окно:

![](<../.gitbook/assets/image (42).png>)

По нажатию на кнопку “Отключить” сбрасываются настройки интеграции, она переводится в статус “Не выполнен” и появляется возможность настроить интеграцию заново.

6. Прогресс пользователя при настройке интеграции сохраняется. То есть, например, если пользователь дошел до этапа 2, то при возврате в настройку интеграции он снова окажется на том этапе, где остановился ранее.
7. Разрешается переход между этапами посредством нажатия на радиобаттоны (кроме перехода на этапы, которые еще не открылись пользователю):

![](<../.gitbook/assets/image (43).png>)

При этом кнопки переходов на этапах 2 и 4 (“Проверено” и “Все отлично”), если ранее эти шаги были пройдены, будут неактивными. Стать активными они могут только в случае, если пользователь поменял значение в поле Basic на этих этапах. Но менять можно только, если интеграция еще настроена не до конца.

8. В зависимости от этапов интеграции, на которых остановился пользователь, статусы в карточке проекта могут меняться:

![](<../.gitbook/assets/image (44).png>)

* Не выполнен - если пользователь не заходил в карточку интеграции
* В процессе - если пользователь находится на каком-либо этапов интеграции (1/4, 2/4 и т.д.)
* Ошибка данных - если после ввода Basic на этапах 2 или 4 проверка завершилась не успешно
* Активен - если все 4 этапа были пройдены успешно.
